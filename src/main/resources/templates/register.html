<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Register | TimeIt</title>
    <link rel="stylesheet" href="/css/auth.css" />
    <link rel="stylesheet" href="/css/footer.css" />
    <link rel="icon" type="image/png" href="/images/logo.png" />
  </head>

  <body>
    <div id="popup" th:if="${errorMessage}" class="popup-error">
      <span th:text="${errorMessage}"></span>
    </div>

    <div id="popup" th:if="${successMessage}" class="popup-success">
      <span th:text="${successMessage}"></span>
    </div>

    <div class="orb orb-1"></div>
    <div class="orb orb-2"></div>
    <div class="orb orb-3"></div>

    <div class="logo brand-box">
      <img src="/images/logo.png" class="logo-icon" alt="Logo" />
      <div class="brand-text">
        <h1 class="brand-name">TimeIt</h1>
        <div class="divider"></div>
        <div class="slogan-stack">
          <span class="slogan-top">"Seize the day</span>
          <span class="slogan-bottom">one task at a time"</span>
        </div>
      </div>
    </div>

    <div class="content-body">
      <div class="blob shape-1"></div>
      <div class="blob shape-2"></div>
      <div class="blob shape-3"></div>

      <div class="auth-card">
        <div class="auth-sidebar">
          <div class="sidebar-badge">Plan. Focus. Achieve.</div>
          <h2>Organize Your Day</h2>
          <p>
            Sign up to streamline your tasks, stay on top of deadlines, and keep
            your day on track effortlessly.
          </p>

          <ul class="benefit-list">
            <li>
              <span class="dot dot-red"></span> High Priority Task Tracking
            </li>
            <li>
              <span class="dot dot-orange"></span> Custom Reminder Schedules
            </li>
            <li><span class="dot dot-green"></span> Real-time Progress Sync</li>
          </ul>
        </div>

        <div class="auth-form">
          <div class="form-title">Create Account</div>
          <div class="form-subtitle">
            Get started in seconds and boost your productivity
          </div>

          <form
            th:action="@{/auth/register}"
            th:object="${registerRequest}"
            method="post"
          >
            <div class="input-group">
              <label>Full Name</label>
              <input
                type="text"
                th:field="*{name}"
                placeholder="Name"
                required
              />
            </div>

            <div class="input-group">
              <label>Email Address</label>
              <input
                type="email"
                th:field="*{email}"
                placeholder="name@company.com"
                required
              />
            </div>

            <div class="input-group password-group">
              <label>Password</label>
              <label>Confirm Password</label>

              <input
                type="password"
                th:field="*{password}"
                placeholder="••••••••"
                minlength="8"
                required
              />

              <div class="tooltip-wrapper">
                <input
                  type="password"
                  th:field="*{confirmPassword}"
                  placeholder="••••••••"
                  minlength="8"
                  required
                />
                <span class="tooltip-text">Passwords do not match</span>
              </div>
            </div>

            <input type="submit" value="Create Account" class="submit-btn" />
          </form>

          <div class="switch-auth">
            Already have an account? <a href="/auth/login">Login</a>
          </div>
        </div>
      </div>
    </div>

    <div th:replace="~{fragments/footer :: footer}"></div>

    <script>
      const passwordInput = document.querySelector('input[name="password"]');
      const confirmPasswordInput = document.querySelector(
        'input[name="confirmPassword"]'
      );
      const tooltipWrapper = confirmPasswordInput.parentElement;
      const submitBtn = document.querySelector(".submit-btn");

      function validatePasswordsLive() {
        if (!confirmPasswordInput.value) {
          tooltipWrapper.classList.remove("invalid");
          submitBtn.disabled = false;
          submitBtn.style.opacity = "1";
          return;
        }

        if (passwordInput.value !== confirmPasswordInput.value) {
          tooltipWrapper.classList.add("invalid");
          submitBtn.disabled = true;
          submitBtn.style.opacity = "0.6";
        } else {
          tooltipWrapper.classList.remove("invalid");
          submitBtn.disabled = false;
          submitBtn.style.opacity = "1";
        }
      }

      passwordInput.addEventListener("input", validatePasswordsLive);
      confirmPasswordInput.addEventListener("input", validatePasswordsLive);
    </script>
  </body>
</html>
